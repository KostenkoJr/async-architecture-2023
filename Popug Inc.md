# Popug Inc. Architecture 

## Auth Service
### Обязанности
1. Авторизация попуг (пользователей)
2. Регистрация новых попуг

### Публикуемые события
1. Папуга зарегистрирован (ID, Name, Role)

### Обрабатываемые сосбытия

## TaskTracker
### Обязанности
1. Создание задач
2. Отображение информации по задачам
3. Распределение задач
4. Отметка о выполнении задачи

### Публикуемые события
1. Создана задача (ID-задачи, стоимость, сумма вознаграждения)
2. Задача назначена (ID-прошлого исполнителя, ID-нового исполнителя, ID-задачи, стоимость, сумма вознаграждения)
3. Задача выполнена (ID-исполнителя, стоимость, сумма вознаграждения)

### Обрабатываемые сосбытия
1. Папуга добавлен в систему (добавляем его в таблицу, чтобы учитывать при назначении задач)


## Accounting
### Обязанности
1. Отображение информации по счетам папуг-работников
2. Отображение информации по заработку менеджеров компании
3. Подсчет баланса + отправка email
4. Выплата баланса (обнуление счета, если положительный)

### Публикуемые события
1. Необходимо отправить email (email, amount)
2. Изменен баланс папуга (ID-папуга, сумма аккаунта папуги)

### Обрабатываемые сосбытия
1. Папуга добавлен в систему (открываем ему счет)
2. Была создана задача (Добавляем в историю и трекаем счет)
3. Задача была назначена (добавляем в историю и трекаем счет)
4. Задача была выполнена (добавляем в историю и трекаем счет)

## Analytics
### Обязанности
1. Отображение информации по папугам-работникам ушедшим в минус
2. Отображение информации по заработку менеджеров
3. Показываем самую дорогую задачу

### Публикуемые события

### Обрабатываемые сосбытия
1. Задача была выполнена (проверяем стоимость, если выше, то записываем в БД)
2. Изменен баланс папуга (проверяем ушел ли в минус, если да, то добавляем в статистику)
